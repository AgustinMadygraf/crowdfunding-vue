<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" href="/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="referrer" content="strict-origin-when-cross-origin" />

    <!-- CSP migrada a cabecera HTTP (ver .htaccess) -->

    <title>Juegoteca Madygraf - Campaña de Crowdfunding</title>

    <!-- SEO Meta Tags -->
    <meta
      name="description"
      content="Campaña de crowdfunding solidario para sostener la Juegoteca de Madygraf: cuidado, juego y aprendizaje dentro de la fábrica recuperada. Seguimiento por etapas y evidencias públicas."
    />
    <meta
      name="keywords"
      content="madygraf, juegoteca, crowdfunding, cooperativa, infancias, cuidado, educación, talleres, solidaridad, fábrica recuperada"
    />
    <meta name="author" content="Cooperativa de Trabajo Madygraf" />

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://juegoteca.madygraf.com/" />
    <meta property="og:title" content="Juegoteca Madygraf - Sostengamos el cuidado y el aprendizaje" />
    <meta
      property="og:description"
      content="Sumate a sostener la Juegoteca de Madygraf: un espacio multiedad de cuidado, juego y aprendizaje. Campaña por etapas con transparencia y evidencias públicas."
    />
    <meta property="og:image" content="https://juegoteca.madygraf.com/og-image.jpg" />
    <meta property="og:site_name" content="Juegoteca Madygraf" />
    <meta property="og:locale" content="es_AR" />

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image" />
    <meta property="twitter:url" content="https://juegoteca.madygraf.com/" />
    <meta property="twitter:title" content="Juegoteca Madygraf - Campaña de Crowdfunding" />
    <meta
      property="twitter:description"
      content="Crowdfunding solidario para sostener la Juegoteca de Madygraf: cuidado, talleres y mejores condiciones para las infancias. Seguimiento por etapas."
    />
    <meta property="twitter:image" content="https://juegoteca.madygraf.com/og-image.jpg" />

    <!-- Canonical URL -->
    <link rel="canonical" href="https://juegoteca.madygraf.com/" />
  </head>

  <body>
    <div id="app"></div>
    <script type="module" src="/src/main.ts"></script>

    <script>
      (function (d, t) {
        var BASE_URL = "%VITE_CHATWOOT_BASE_URL%";
        var TOKEN = "%VITE_CHATWOOT_TOKEN%";
        var INTEGRITY = "%VITE_CHATWOOT_SDK_INTEGRITY%";

        // Verificar si las credenciales están configuradas
        if (
          !BASE_URL ||
          BASE_URL.includes("%VITE_") ||
          !TOKEN ||
          TOKEN.includes("%VITE_")
        ) {
          console.warn(
            "[Chatwoot] No configurado - Las variables de entorno VITE_CHATWOOT_BASE_URL y VITE_CHATWOOT_TOKEN no están definidas en el archivo .env"
          );
          return;
        }

        var normalizedBaseUrl = BASE_URL.trim().replace(/\/+$/, "");
        var g = d.createElement(t),
          s = d.getElementsByTagName(t)[0];

        g.src = normalizedBaseUrl + "/packs/js/sdk.js";
        g.async = true;

        // Preparar para SRI si se provee hash
        if (INTEGRITY && !INTEGRITY.includes("%VITE_")) {
          g.integrity = INTEGRITY;
          g.crossOrigin = "anonymous";
        }
        // NO establecer crossOrigin sin integrity; puede causar CORS issues
        s.parentNode.insertBefore(g, s);

        g.onload = function () {
          window.chatwootSDK.run({
            websiteToken: TOKEN,
            baseUrl: normalizedBaseUrl,
          });
        };
      })(document, "script");
    </script>
  </body>
</html>
